!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ga=e()}(this,(function(){"use strict";var t=function(){function t(){this.params={},this.params_map={utm_source:"cs",utm_medium:"cm",utm_term:"ck",utm_content:"cc",utm_campaign:"cn",gclid:"gclid",dclid:"dclid"}}return t.prototype.set=function(t,e){return t in this.params_map&&(this.params[t]=e),this},t.prototype.toUrl=function(){var t=[];for(var e in this.params)t.push([encodeURIComponent(e),encodeURIComponent(this.params[e])].join("="));return"https://example.com?"+t.join("&")},t.parseFromPageOptions=function(e,n){void 0===e&&(e={}),void 0===n&&(n={});var i=new t;for(var o in e){var r=e[o];o in n&&(o=n[o]),(o.match(/^utm_/)||"gclid"==o||"dclid"==o)&&i.set(o,r)}return i},t.buildFromWxAppScene=function(e){var n=new Map([[1e3,"其他"],[1001,"发现栏小程序主入口，「最近使用」列表（基础库2.2.4版本起包含「我的小程序」列表）"],[1005,"微信首页顶部搜索框的搜索结果页"],[1006,"发现栏小程序主入口搜索框的搜索结果页"],[1007,"单人聊天会话中的小程序消息卡片"],[1008,"群聊会话中的小程序消息卡片"],[1010,"收藏夹"],[1011,"扫描二维码"],[1012,"长按图片识别二维码"],[1013,"扫描手机相册中选取的二维码"],[1014,"小程序模板消息"],[1017,"前往小程序体验版的入口页"],[1019,"微信钱包（微信客户端7.0.0版本改为支付入口）"],[1020,"公众号 profile 页相关小程序列表（已废弃）"],[1022,"聊天顶部置顶小程序入口（微信客户端6.6.1版本起废弃）"],[1023,"安卓系统桌面图标"],[1024,"小程序 profile 页"],[1025,"扫描一维码"],[1026,"发现栏小程序主入口，「附近的小程序」列表"],[1027,"微信首页顶部搜索框搜索结果页「使用过的小程序」列表"],[1028,"我的卡包"],[1029,"小程序中的卡券详情页"],[1030,"自动化测试下打开小程序"],[1031,"长按图片识别一维码"],[1032,"扫描手机相册中选取的一维码"],[1034,"微信支付完成页"],[1035,"公众号自定义菜单"],[1036,"App 分享消息卡片"],[1037,"小程序打开小程序"],[1038,"从另一个小程序返回"],[1039,"摇电视"],[1042,"添加好友搜索框的搜索结果页"],[1043,"公众号模板消息"],[1044,"带 shareTicket 的小程序消息卡片"],[1045,"朋友圈广告"],[1046,"朋友圈广告详情页"],[1047,"扫描小程序码"],[1048,"长按图片识别小程序码"],[1049,"扫描手机相册中选取的小程序码"],[1052,"卡券的适用门店列表"],[1053,"搜一搜的结果页"],[1054,"顶部搜索框小程序快捷入口（微信客户端版本6.7.4起废弃）"],[1056,"聊天顶部音乐播放器右上角菜单"],[1057,"钱包中的银行卡详情页"],[1058,"公众号文章"],[1059,"体验版小程序绑定邀请页"],[1060,"微信支付完成页（与1034相同）"],[1064,"微信首页连Wi-Fi状态栏"],[1065,"URL scheme"],[1067,"公众号文章广告"],[1068,"附近小程序列表广告（已废弃）"],[1069,"移动应用"],[1071,"钱包中的银行卡列表页"],[1072,"二维码收款页面"],[1073,"客服消息列表下发的小程序消息卡片"],[1074,"公众号会话下发的小程序消息卡片"],[1077,"摇周边"],[1078,"微信连Wi-Fi成功提示页"],[1079,"微信游戏中心"],[1081,"客服消息下发的文字链"],[1082,"公众号会话下发的文字链"],[1084,"朋友圈广告原生页"],[1088,"会话中查看系统消息，打开小程序"],[1089,"微信聊天主界面下拉，「最近使用」栏（基础库2.2.4版本起包含「我的小程序」栏）"],[1090,"长按小程序右上角菜单唤出最近使用历史"],[1091,"公众号文章商品卡片"],[1092,"城市服务入口"],[1095,"小程序广告组件"],[1096,"聊天记录，打开小程序"],[1097,"微信支付签约原生页，打开小程序"],[1099,"页面内嵌插件"],[1100,"红包封面详情页打开小程序"],[1102,"公众号 profile 页服务预览"],[1103,"发现栏小程序主入口，「我的小程序」列表（基础库2.2.4版本起废弃）"],[1104,"微信聊天主界面下拉，「我的小程序」栏（基础库2.2.4版本起废弃）"],[1106,"聊天主界面下拉，从顶部搜索结果页，打开小程序"],[1107,"订阅消息，打开小程序"],[1113,"安卓手机负一屏，打开小程序（三星）"],[1114,"安卓手机侧边栏，打开小程序（三星）"],[1119,"【企业微信】工作台内打开小程序"],[1120,"【企业微信】个人资料页内打开小程序"],[1121,"【企业微信】聊天加号附件框内打开小程序"],[1124,"扫“一物一码”打开小程序"],[1125,"长按图片识别“一物一码”"],[1126,"扫描手机相册中选取的“一物一码”"],[1129,"微信爬虫访问"],[1131,"浮窗（8.0版本起仅包含被动浮窗）"],[1133,"硬件设备打开小程序"],[1135,"小程序profile页相关小程序列表，打开小程序"],[1144,"公众号文章 - 视频贴片"],[1145,"发现栏 - 发现小程序"],[1146,"地理位置信息打开出行类小程序"],[1148,"卡包-交通卡，打开小程序"],[1150,"扫一扫商品条码结果页打开小程序"],[1151,"发现栏 - 我的订单"],[1152,"订阅号视频打开小程序"],[1153,"“识物”结果页打开小程序"],[1154,"朋友圈内打开“单页模式”"],[1155,"“单页模式”打开小程序"],[1157,"服务号会话页打开小程序"],[1158,"群工具打开小程序"],[1160,"群待办"],[1167,"H5 通过开放标签打开小程序"],[1169,"发现栏小程序主入口，各个生活服务入口（例如快递服务、出行服务等）"],[1171,"微信运动记录（仅安卓）"],[1173,"聊天素材用小程序打开"],[1175,"视频号主页商店入口"],[1177,"视频号直播商品"],[1178,"在电脑打开手机上打开的小程序"],[1183,"PC微信 - 小程序面板 - 发现小程序 - 搜索"],[1185,"群公告"],[1186,"收藏 - 笔记"],[1187,"浮窗（8.0版本起）"],[1189,"表情雨广告"],[1191,"视频号活动"],[1192,"企业微信联系人profile页"]]),i=new t,o=n.get(e);return o?(i.set("utm_source","小程序场景"),i.set("utm_medium",e+":"+o)):(i.set("utm_source","小程序场景"),i.set("utm_medium",e+"")),i},t.parseFromUrl=function(e){var n=e.replace(/^[^?]+\?/,""),i=new t,o=i.params_map;return n.split("&").map((function(t){var e=t.split("="),n=decodeURIComponent(e[0]);if(2==e.length&&""!==e[1]&&o[n]){var r=decodeURIComponent(e[1]);i.set(n,r)}})),i},t}();function e(t){return String(t).replace(/^&/,"")}function n(e){var n=t.parseFromUrl(e),i=n.params_map,o={};for(var r in n.params)o[i[r]]=n.params[r];return o}function i(t,e,n){t.hit[e]==n&&delete t.hit[e]}var o=function(){function t(){this.hit={t:"screenview",ni:0},this.custom_dimensions=[],this.custom_metrics=[],this.next_impression_index=1,this.impression_product_list={},this.next_product_index=1,this.next_promotion_index=1}return t.prototype.get=function(t){return this.hit[e(t)]},t.prototype.set=function(t,n){return this.hit[e(t)]=n,this},t.prototype.setAll=function(t){for(var e in t)this.set(e,t[e]);return this},t.prototype.addImpression=function(t,e){this.impression_product_list[e]||(this.impression_product_list[e]=[this.next_impression_index,1],this.set("il"+this.next_impression_index+"nm",e),this.next_impression_index++);var n=this.impression_product_list[e][0],i=this.impression_product_list[e][1];for(var o in t.hit)this.set("il"+n+"pi"+i+o,t.hit[o]);return this.impression_product_list[e][1]=i+1,this},t.prototype.addProduct=function(t){var e=this.next_product_index;for(var n in t.hit)this.set("pr"+e+n,t.hit[n]);return this.next_product_index++,this},t.prototype.addPromotion=function(t){var e=this.next_promotion_index;for(var n in t.hit)this.set("promo"+e+n,t.hit[n]);return this.next_promotion_index++,this},t.prototype.setPromotionAction=function(t){return this.set("promoa",t)},t.prototype.setCampaignParamsFromUrl=function(t){var e=n(t);return this.setAll(e)},t.prototype.setCustomDimension=function(t,e){return this.custom_dimensions.push([t,e]),this},t.prototype.setCustomMetric=function(t,e){return this.custom_metrics.push([t,e]),this},t.prototype.setNewSession=function(){return this.hit.sc="start",this},t.prototype.setEndSession=function(){return this.hit.sc="end",this},t.prototype.setNonInteraction=function(t){return this.hit.ni=t?1:0,this},t.prototype.setHitType=function(t){this.hit.t=t},t.prototype.build=function(){var t=this,e=[];for(var n in 0===this.hit.ni&&e.push("ni"),this.hit)n.match(/^(cd|cm)\d+$/)&&e.push(n);e.forEach((function(e){delete t.hit[e]}));var i=this.custom_dimensions,o=this.custom_metrics;return i.forEach((function(e){t.hit["cd"+e[0]]=e[1]})),o.forEach((function(e){t.hit["cm"+e[0]]=e[1]})),this.hit},t}(),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(t){function e(){var e=t.call(this)||this;return e.setHitType("screenview"),e}return s(e,t),e}(o),p=function(t){function e(){var e=t.call(this)||this;return e.setHitType("event"),e.setAll({ec:"",ea:"",el:"",ev:0}),e}return s(e,t),e.prototype.setCategory=function(t){return this.set("ec",t)},e.prototype.setAction=function(t){return this.set("ea",t)},e.prototype.setLabel=function(t){return void 0===t&&(t=""),this.set("el",t)},e.prototype.setValue=function(t){return void 0===t&&(t=0),this.set("ev",t)},e.prototype.build=function(){return i(this,"ev",0),i(this,"el",""),t.prototype.build.call(this)},e}(o),c=function(t){function e(){var e=t.call(this)||this;return e.setHitType("social"),e.setAll({sn:"",sa:"",st:""}),e}return s(e,t),e.prototype.setNetWork=function(t){return this.set("sn",t)},e.prototype.setAction=function(t){return this.set("sa",t)},e.prototype.setTarget=function(t){return this.set("st",t)},e}(o),h=function(t){function e(){var e=t.call(this)||this;return e.setHitType("exception"),e.setAll({exd:"",exf:1}),e}return s(e,t),e.prototype.setDescription=function(t){return this.set("exd",t)},e.prototype.setFatal=function(t){return this.set("exf",t?1:0)},e}(o),a=function(t){function e(){var e=t.call(this)||this;return e.setAll({utc:"",utv:"",utt:0,utl:"",plt:0,dns:0,pdt:0,rrt:0,tcp:0,srt:0,dit:0,clt:0}),e}return s(e,t),e.prototype.setCategory=function(t){return this.set("utc",t)},e.prototype.setVariable=function(t){return this.set("utv",t)},e.prototype.setValue=function(t){return this.set("utt",t)},e.prototype.setLabel=function(t){return void 0===t&&(t=""),this.set("utl",t)},e.prototype.setPageLoadTime=function(t){return void 0===t&&(t=0),this.set("plt",t)},e.prototype.setDNSTime=function(t){return void 0===t&&(t=0),this.set("dns",t)},e.prototype.setPageDownloadTime=function(t){return void 0===t&&(t=0),this.set("pdt",t)},e.prototype.setRedirectResponseTime=function(t){return void 0===t&&(t=0),this.set("rrt",t)},e.prototype.setTCPConnectTime=function(t){return void 0===t&&(t=0),this.set("tcp",t)},e.prototype.setServerResponseTime=function(t){return void 0===t&&(t=0),this.set("srt",t)},e.prototype.setDocumentInteractiveTime=function(t){return void 0===t&&(t=0),this.set("dit",t)},e.prototype.setContentLoadedTime=function(t){return void 0===t&&(t=0),this.set("clt",t)},e.prototype.build=function(){return i(this,"utl",""),i(this,"plt",0),i(this,"dns",0),i(this,"pdt",0),i(this,"rrt",0),i(this,"tcp",0),i(this,"srt",0),i(this,"dit",0),i(this,"clt",0),t.prototype.build.call(this)},e}(o),f=function(){function t(){this.hit={}}return t.prototype.setId=function(t){return this.hit.id=String(t),this},t.prototype.setBrand=function(t){return this.hit.br=t,this},t.prototype.setName=function(t){return this.hit.nm=String(t),this},t.prototype.setCategory=function(t){return this.hit.ca=t,this},t.prototype.setCouponCode=function(t){return this.hit.cc=t,this},t.prototype.setPrice=function(t){return this.hit.pr=t,this},t.prototype.setQuantity=function(t){return this.hit.qt=t,this},t.prototype.setPosition=function(t){return this.hit.ps=t,this},t.prototype.setVariant=function(t){return this.hit.va=t,this},t.prototype.setCustomDimension=function(t,e){return this.hit["cd"+t]=e,this},t.prototype.setCustomMetric=function(t,e){return this.hit["cm"+t]=e,this},t}(),d=function(){function t(t){this.hit={pa:t}}return t.prototype.setCheckoutStep=function(t){return this.hit.cos=t,this},t.prototype.setCheckoutOptions=function(t){return this.hit.col=t,this},t.prototype.setProductActionList=function(t){return this.hit.pal=t,this},t.prototype.setProductListSource=function(t){return this.hit.pls=t,this},t.prototype.setTransactionCouponCode=function(t){return this.hit.tcc=t,this},t.prototype.setTransactionId=function(t){return this.hit.ti=t,this},t.prototype.setTransactionAffiliation=function(t){return this.hit.ta=t,this},t.prototype.setTransactionRevenue=function(t){return this.hit.tr=t,this},t.prototype.setTransactionShipping=function(t){return this.hit.ts=t,this},t.prototype.setTransactionTax=function(t){return this.hit.tt=t,this},t.ACTION_DETAIL="detail",t.ACTION_CLICK="click",t.ACTION_ADD="add",t.ACTION_REMOVE="remove",t.ACTION_CHECKOUT="checkout",t.ACTION_CHECKOUT_OPTION="checkout_option",t.ACTION_PURCHASE="purchase",t.ACTION_REFUND="refund",t}(),l=function(){function t(){this.hit={}}return t.prototype.setId=function(t){return this.hit.id=String(t),this},t.prototype.setName=function(t){return this.hit.nm=t,this},t.prototype.setCreative=function(t){return this.hit.cr=t,this},t.prototype.setPosition=function(t){return this.hit.ps=t,this},t.ACTION_CLICK="click",t.ACTION_VIEW="view",t}(),y=function(){function t(t,e){this.ga=t,this.hit={tid:e,cd:""},this.trackerServer="https://www.google-analytics.com",this.next_hit={},this.sending=!1,this.send_queue=[]}return t.prototype.setTrackerServer=function(t){return this.trackerServer=t,this},t.prototype.get=function(t){return this.hit[e(t)]},t.prototype.set=function(t,n){return this.hit[e(t)]=n,this},t.prototype.setAnonymizeIp=function(t){return this.set("aip",t?1:0)},t.prototype.setAppId=function(t){return this.set("aid",t)},t.prototype.setAppInstallerId=function(t){return this.set("aiid",t)},t.prototype.setAppName=function(t){return this.set("an",t)},t.prototype.setAppVersion=function(t){return this.set("av",t)},t.prototype.setCampaignParamsOnNextHit=function(t){var e=n(t);for(var i in this.next_hit={},e)this.next_hit[i]=e[i];return this},t.prototype.setClientId=function(t){return this.set("cid",t)},t.prototype.setUserId=function(t){return this.set("uid",t)},t.prototype.setEncoding=function(t){return this.set("de",t)},t.prototype.setLanguage=function(t){return this.set("ul",t)},t.prototype.setLocation=function(t){return this.set("geoid",t)},t.prototype.setScreenColors=function(t){return this.set("sd",t)},t.prototype.setScreenName=function(t){return this.set("cd",t)},t.prototype.setViewportSize=function(t){return this.set("vp",t)},t.prototype.send=function(t){return this.send_queue_push(this.ga,t),this},t.prototype.send_queue_push=function(t,e){var n={v:1,cid:t.cid,ds:"app",ul:t.systemInfo.language,de:"UTF-8",sd:"24-bit",je:0,an:t.appName,av:t.appVersion,vp:t.vp};for(var i in this.hit)n[i]=this.hit[i];for(var o in this.next_hit)n[o]=this.next_hit[o];for(var r in this.next_hit={},e)n[r]=e[r];this.ga.log&&console.log(["ga.queue.push",n]),this.send_queue.push([n,new Date]),this._do_send()},t.prototype._do_send=function(){if(!this.sending)if(this.send_queue.length){this.sending=!0;for(var t=this,e=function(t){var e=[];for(var n in t)e.push([encodeURIComponent(n),encodeURIComponent(t[n])].join("="));return e.join("&")},n=[];this.send_queue.length;){var i=this.send_queue[0],o=i[0];o.qt=(new Date).getTime()-i[1].getTime(),o.z=Math.floor(289372387*Math.random());var r=e(o),s=n.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0),u=r.length;if((s+u>16384||u>8192||n.length>=20)&&n.length)break;n.push(r),this.send_queue.shift(),this.ga.log&&console.log(["ga.queue.presend["+(n.length-1)+"]",o])}var p,c=n.join("\r\n"),h=this.trackerServer+"/collect";n.length>1?(this.ga.log&&console.log(["ga.queue.send.batch",c]),h=this.trackerServer+"/batch"):this.ga.log&&console.log(["ga.queue.send.collect",c]),p={url:h,data:c,method:"POST",header:{"content-type":"text/plain"},success:function(e){t.ga.log&&console.log(["ga:success",e])},fail:function(e){t.ga.log&&console.log(["ga:failed",e])},complete:function(){t.sending=!1,setTimeout((function(){t._do_send()}),0)}},"object"==typeof uni&&"function"==typeof uni.getSystemInfo?uni.request(p):wx.request(p)}else this.sending=!1},t}(),m=function(){function t(t){this.app=t,this.appName="unknown",this.appVersion="unknown",this.cid=this.getCid(),this.log=!0,this.systemInfo="object"==typeof uni&&"function"==typeof uni.getSystemInfo?uni.getSystemInfoSync():"object"==typeof wx&&"function"==typeof wx.setStorageSync?wx.getSystemInfoSync():{brand:"unknown",screenWidth:0,screenHeight:0,windowWidth:0,windowHeight:0,pixelRatio:1,language:"zh_CN",system:"unknown",model:"unknown",version:"unknown",platform:"unknown",fontSizeSetting:0,SDKVersion:"unknown"},this.vp=[this.systemInfo.windowWidth,this.systemInfo.windowHeight].map((function(t){return t})).join("x"),this.trackers=[]}return t.prototype.getCid=function(){var t="_ga_cid",e=function(t){if(t)return"object"==typeof window&&"object"==typeof window.localStorage?localStorage.getItem(t):"object"==typeof uni&&"function"==typeof uni.getStorageSync?uni.getStorageSync(t):"object"==typeof wx&&"function"==typeof wx.getStorageSync?wx.getStorageSync(t):void 0}(t);return e||function(t,e){if(t)"object"==typeof window&&"object"==typeof window.localStorage?localStorage.setItem(t,e):"object"==typeof uni&&"function"==typeof uni.setStorageSync?uni.setStorageSync(t,e):"object"==typeof wx&&"function"==typeof wx.setStorageSync&&wx.setStorageSync(t,e)}(t,e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))),e},t.prototype.setAppName=function(t){return t&&(this.appName=t),this},t.prototype.setAppVersion=function(t){return t&&(this.appVersion=t),this},t.prototype.getDefaultTracker=function(){return this.trackers[0]},t.prototype.newTracker=function(t){if(t){var e=new y(this,t);return this.trackers.push(e),e}},t.prototype.setLog=function(t){return this.log=!!t,this},t}();return{GoogleAnalytics:{getInstance:function(t){return void 0===t&&(t={}),t.defaultGoogleAnalyticsInstance||(t.defaultGoogleAnalyticsInstance=new m(t)),t.defaultGoogleAnalyticsInstance}},HitBuilders:{HitBuilder:o,ScreenViewBuilder:u,EventBuilder:p,SocialBuilder:c,ExceptionBuilder:h,TimingBuilder:a},Product:f,ProductAction:d,Promotion:l}}));
